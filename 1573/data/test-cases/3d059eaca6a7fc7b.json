{"uid":"3d059eaca6a7fc7b","name":"test_db_migration","fullName":"tests.integration.test_db_migration#test_db_migration","historyId":"91090b7b91ff22d006a46c7dd051bfd1","time":{"start":1765035190496,"stop":1765035419438,"duration":228942},"description":"\n    arrange: preload postgres with a testing db that is created in Discourse v3.2.0\n    act: deploy and integrate with Discourse v3.3.0 (latest)\n    assert: discourse is active/idle\n\n    Discourse must be active idle, it might create migration errors related to\n    not being able to delete some columns because of triggers. This is fixed\n    with a patch but this patch only works for Discourse v3.2.0 and we might\n    need to create a new patch for the new version of Discourse.\n    ","descriptionHtml":"<pre><code>arrange: preload postgres with a testing db that is created in Discourse v3.2.0\nact: deploy and integrate with Discourse v3.3.0 (latest)\nassert: discourse is active/idle\n\nDiscourse must be active idle, it might create migration errors related to\nnot being able to delete some columns because of triggers. This is fixed\nwith a patch but this patch only works for Discourse v3.2.0 and we might\nneed to create a new patch for the new version of Discourse.\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"metadata","time":{"start":1765035190493,"stop":1765035190495,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_file","time":{"start":1765035190495,"stop":1765035190495,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_base","time":{"start":1765035190495,"stop":1765035190495,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju","time":{"start":1765035190495,"stop":1765035190495,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_resources","time":{"start":1765035190495,"stop":1765035190495,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1765035190495,"stop":1765035190495,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1765035190495,"stop":1765035190495,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    arrange: preload postgres with a testing db that is created in Discourse v3.2.0\n    act: deploy and integrate with Discourse v3.3.0 (latest)\n    assert: discourse is active/idle\n\n    Discourse must be active idle, it might create migration errors related to\n    not being able to delete some columns because of triggers. This is fixed\n    with a patch but this patch only works for Discourse v3.2.0 and we might\n    need to create a new patch for the new version of Discourse.\n    ","status":"passed","steps":[],"attachments":[{"uid":"8a0b7588f07c59d8","name":"log","source":"8a0b7588f07c59d8.txt","type":"text/plain","size":76745}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"charm_file::0","time":{"start":1765035419439,"stop":1765035419439,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju::0","time":{"start":1765035419439,"stop":1765035419439,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1765035419439,"stop":1765035419439,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"metadata::0","time":{"start":1765035419440,"stop":1765035419440,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"parentSuite","value":"tests.integration"},{"name":"suite","value":"test_db_migration"},{"name":"host","value":"github-runner"},{"name":"thread","value":"71976-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.test_db_migration"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"a8a52a1c48534eab","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":0,"broken":3,"skipped":0,"passed":32,"unknown":0,"total":35},"items":[{"uid":"15a8ff416470bc42","reportUrl":"../1571//#testresult/15a8ff416470bc42","status":"passed","time":{"start":1764430980881,"stop":1764431233022,"duration":252141}},{"uid":"d9b7e77a0274b946","reportUrl":"../1564//#testresult/d9b7e77a0274b946","status":"passed","time":{"start":1763825972159,"stop":1763826213775,"duration":241616}},{"uid":"5053f4f2499b5b0c","reportUrl":"../1560//#testresult/5053f4f2499b5b0c","status":"passed","time":{"start":1763646059055,"stop":1763646362968,"duration":303913}},{"uid":"888af3057c57581","reportUrl":"../1558//#testresult/888af3057c57581","status":"passed","time":{"start":1763645300741,"stop":1763645558888,"duration":258147}},{"uid":"eabb0ec613b2d8c8","reportUrl":"../1557//#testresult/eabb0ec613b2d8c8","status":"passed","time":{"start":1763637269467,"stop":1763637517203,"duration":247736}},{"uid":"3e0aa02cece3b567","reportUrl":"../1556//#testresult/3e0aa02cece3b567","status":"passed","time":{"start":1763633189129,"stop":1763633441536,"duration":252407}},{"uid":"74b148d7cc643ae","reportUrl":"../1554//#testresult/74b148d7cc643ae","status":"passed","time":{"start":1763584208927,"stop":1763584465492,"duration":256565}},{"uid":"7797e1b853eb0620","reportUrl":"../1548//#testresult/7797e1b853eb0620","status":"passed","time":{"start":1763504575839,"stop":1763504869342,"duration":293503}},{"uid":"a0e58f80c9b17151","reportUrl":"../1547//#testresult/a0e58f80c9b17151","status":"passed","time":{"start":1763486956819,"stop":1763487192351,"duration":235532}},{"uid":"b93d90392c56c1ec","reportUrl":"../1546//#testresult/b93d90392c56c1ec","status":"passed","time":{"start":1763484028928,"stop":1763484279530,"duration":250602}},{"uid":"e4683d75b21dc97d","reportUrl":"../1545//#testresult/e4683d75b21dc97d","status":"broken","statusDetails":"TimeoutError: wait timed out after 180.0s\nStatus(\n  model=ModelStatus(\n    name='testing',\n    type='caas',\n    controller='github-pr-1a7c9-microk8s',\n    cloud='microk8s',\n    version='3.6.11',\n    region='localhost',\n    model_status=StatusInfo(current='available', since='18 Nov 2025 13:18:04Z'),\n  ),\n  machines={},\n  apps={\n    'discourse-k8s': AppStatus(\n      charm='local:discourse-k8s-0',\n      charm_origin='local',\n      charm_name='discourse-k8s',\n      charm_rev=0,\n      exposed=False,\n      base=FormattedBase(name='ubuntu', channel='20.04'),\n      scale=1,\n      provider_id='d25030c0-d808-4cc8-96c6-7989bab1d042',\n      address='10.152.183.204',\n      app_status=StatusInfo(current='waiting', message='Waiting for redis relation', since='18 Nov 2025 13:24:11Z'),\n      relations={\n        'database': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='postgresql_client', scope='global'),\n        ],\n        'nginx-route': [\n          AppStatusRelation(related_app='nginx-ingress-integrator', interface='nginx-route', scope='global'),\n        ],\n        'redis': [\n          AppStatusRelation(related_app='redis-k8s', interface='redis', scope='global'),\n        ],\n        'restart': [\n          AppStatusRelation(related_app='discourse-k8s', interface='rolling_op', scope='global'),\n        ],\n      },\n      units={\n        'discourse-k8s/0': UnitStatus(\n          workload_status=StatusInfo(current='waiting', message='Waiting for redis relation', since='18 Nov 2025 13:24:11Z'),\n          juju_status=StatusInfo(current='executing', message='running discourse-pebble-ready hook', since='18 Nov 2025 13:26:35Z', version='3.6.11'),\n          leader=True,\n          address='10.1.53.15',\n          provider_id='discourse-k8s-0',\n        ),\n      },\n      endpoint_bindings={\n        '': 'alpha',\n        'database': 'alpha',\n        'grafana-dashboard': 'alpha',\n        'logging': 'alpha',\n        'metrics-endpoint': 'alpha',\n        'nginx-route': 'alpha',\n        'redis': 'alpha',\n        'restart': 'alpha',\n        'saml': 'alpha',\n      },\n    ),\n    'nginx-ingress-integrator': AppStatus(\n      charm='nginx-ingress-integrator',\n      charm_origin='charmhub',\n      charm_name='nginx-ingress-integrator',\n      charm_rev=145,\n      exposed=False,\n      base=FormattedBase(name='ubuntu', channel='20.04'),\n      charm_channel='latest/stable',\n      scale=1,\n      provider_id='9c3a7ae9-5263-434f-8ba2-aa3c38141d2f',\n      address='10.152.183.121',\n      app_status=StatusInfo(current='active', message='Ingress IP(s): 127.0.0.1', since='18 Nov 2025 13:24:12Z'),\n      relations={\n        'nginx-peers': [\n          AppStatusRelation(related_app='nginx-ingress-integrator', interface='nginx-instance', scope='global'),\n        ],\n        'nginx-route': [\n          AppStatusRelation(related_app='discourse-k8s', interface='nginx-route', scope='global'),\n        ],\n      },\n      units={\n        'nginx-ingress-integrator/0': UnitStatus(\n          workload_status=StatusInfo(current='active', message='Ingress IP(s): 127.0.0.1', since='18 Nov 2025 13:24:12Z'),\n          juju_status=StatusInfo(current='idle', since='18 Nov 2025 13:24:13Z', version='3.6.11'),\n          leader=True,\n          address='10.1.53.14',\n          provider_id='nginx-ingress-integrator-0',\n        ),\n      },\n      version='24.2.0',\n      endpoint_bindings={'': 'alpha', 'certificates': 'alpha', 'ingress': 'alpha', 'nginx-peers': 'alpha', 'nginx-route': 'alpha'},\n    ),\n    'postgresql-k8s': AppStatus(\n      charm='postgresql-k8s',\n      charm_origin='charmhub',\n      charm_name='postgresql-k8s',\n      charm_rev=495,\n      exposed=False,\n      base=FormattedBase(name='ubuntu', channel='22.04'),\n      charm_channel='14/stable',\n      scale=1,\n      provider_id='e1a995bb-3710-4b32-aa2a-a9de9884bf9e',\n      address='10.152.183.93',\n      app_status=StatusInfo(current='active', since='18 Nov 2025 13:22:08Z'),\n      relations={\n        'database': [\n          AppStatusRelation(related_app='discourse-k8s', interface='postgresql_client', scope='global'),\n        ],\n        'database-peers': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='postgresql_peers', scope='global'),\n        ],\n        'restart': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='rolling_op', scope='global'),\n        ],\n        'upgrade': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='upgrade', scope='global'),\n        ],\n      },\n      units={\n        'postgresql-k8s/0': UnitStatus(\n          workload_status=StatusInfo(current='active', message='Primary', since='18 Nov 2025 13:22:39Z'),\n          juju_status=StatusInfo(current='idle', since='18 Nov 2025 13:24:53Z', version='3.6.11'),\n          leader=True,\n          address='10.1.53.11',\n          provider_id='postgresql-k8s-0',\n        ),\n      },\n      version='14.15',\n      endpoint_bindings={\n        '': 'alpha',\n        'certificates': 'alpha',\n        'database': 'alpha',\n        'database-peers': 'alpha',\n        'db': 'alpha',\n        'db-admin': 'alpha',\n        'grafana-dashboard': 'alpha',\n        'logging': 'alpha',\n        'metrics-endpoint': 'alpha',\n        'replication': 'alpha',\n        'replication-offer': 'alpha',\n        'restart': 'alpha',\n        's3-parameters': 'alpha',\n        'tracing': 'alpha',\n        'upgrade': 'alpha',\n      },\n    ),\n    'redis-k8s': AppStatus(\n      charm='redis-k8s',\n      charm_origin='charmhub',\n      charm_name='redis-k8s',\n      charm_rev=42,\n      exposed=False,\n      base=FormattedBase(name='ubuntu', channel='22.04'),\n      charm_channel='latest/edge',\n      scale=1,\n      provider_id='9eccf03d-ef67-4ec4-821d-572dec3bb931',\n      address='10.152.183.172',\n      app_status=StatusInfo(current='active', since='18 Nov 2025 13:23:18Z'),\n      relations={\n        'redis': [\n          AppStatusRelation(related_app='discourse-k8s', interface='redis', scope='global'),\n        ],\n        'redis-peers': [\n          AppStatusRelation(related_app='redis-k8s', interface='redis-peers', scope='global'),\n        ],\n      },\n      units={\n        'redis-k8s/0': UnitStatus(\n          workload_status=StatusInfo(current='active', since='18 Nov 2025 13:23:16Z'),\n          juju_status=StatusInfo(current='idle', since='18 Nov 2025 13:24:03Z', version='3.6.11'),\n          leader=True,\n          address='10.1.53.13',\n          provider_id='redis-k8s-0',\n        ),\n      },\n      version='7.2.5',\n      endpoint_bindings={'': 'alpha', 'grafana-dashboard': 'alpha', 'logging': 'alpha', 'metrics-endpoint': 'alpha', 'redis': 'alpha', 'redis-peers': 'alpha'},\n    ),\n  },\n  storage=CombinedStorage(\n    storage={\n      'database/1': StorageInfo(\n        kind='filesystem',\n        status=EntityStatus(current='attached', message='Successfully provisioned volume pvc-012af52b-7a90-426d-9292-63d7dd80c771', since='18 Nov 2025 13:22:47Z'),\n        persistent=False,\n        life='alive',\n        attachments=StorageAttachments(\n          units={\n            'redis-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n      ),\n      'pgdata/0': StorageInfo(\n        kind='filesystem',\n        status=EntityStatus(current='attached', message='Successfully provisioned volume pvc-5ac4a3cd-3e7a-4aa4-ad01-b19a15e322b3', since='18 Nov 2025 13:20:41Z'),\n        persistent=False,\n        life='alive',\n        attachments=StorageAttachments(\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n      ),\n    },\n    filesystems={\n      '0': FilesystemInfo(\n        size=1024,\n        provider_id='5ac4a3cd-3e7a-4aa4-ad01-b19a15e322b3',\n        volume='0',\n        storage='pgdata/0',\n        attachments=FilesystemAttachments(\n          containers={\n            'postgresql-k8s/0': FilesystemAttachment(mount_point='/var/lib/postgresql/data', read_only=False, life='alive'),\n          },\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n        pool='kubernetes',\n        life='alive',\n        status=EntityStatus(current='attached', message='Successfully provisioned volume pvc-5ac4a3cd-3e7a-4aa4-ad01-b19a15e322b3', since='18 Nov 2025 13:20:41Z'),\n      ),\n      '1': FilesystemInfo(\n        size=1024,\n        provider_id='012af52b-7a90-426d-9292-63d7dd80c771',\n        volume='1',\n        storage='database/1',\n        attachments=FilesystemAttachments(\n          containers={\n            'redis-k8s/0': FilesystemAttachment(mount_point='/var/lib/redis', read_only=False, life='alive'),\n          },\n          units={\n            'redis-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n        pool='kubernetes',\n        life='alive',\n        status=EntityStatus(current='attached', message='Successfully provisioned volume pvc-012af52b-7a90-426d-9292-63d7dd80c771', since='18 Nov 2025 13:22:47Z'),\n      ),\n    },\n    volumes={\n      '0': VolumeInfo(\n        size=1024,\n        persistent=True,\n        provider_id='pvc-5ac4a3cd-3e7a-4aa4-ad01-b19a15e322b3',\n        storage='pgdata/0',\n        attachments=VolumeAttachments(\n          containers={\n            'postgresql-k8s/0': VolumeAttachment(read_only=False, life='alive'),\n          },\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n        pool='kubernetes',\n        life='alive',\n        status=EntityStatus(current='attached', since='18 Nov 2025 13:20:41Z'),\n      ),\n      '1': VolumeInfo(\n        size=1024,\n        persistent=True,\n        provider_id='pvc-012af52b-7a90-426d-9292-63d7dd80c771',\n        storage='database/1',\n        attachments=VolumeAttachments(\n          containers={\n            'redis-k8s/0': VolumeAttachment(read_only=False, life='alive'),\n          },\n          units={\n            'redis-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n        pool='kubernetes',\n        life='alive',\n        status=EntityStatus(current='attached', since='18 Nov 2025 13:22:47Z'),\n      ),\n    },\n  ),\n  controller=ControllerStatus(timestamp='13:26:36Z'),\n)","time":{"start":1763472026550,"stop":1763472397230,"duration":370680}},{"uid":"a3af3363c81beea1","reportUrl":"../1544//#testresult/a3af3363c81beea1","status":"passed","time":{"start":1763467025863,"stop":1763467262257,"duration":236394}},{"uid":"d0ff140b8631eed0","reportUrl":"../1543//#testresult/d0ff140b8631eed0","status":"passed","time":{"start":1763463651866,"stop":1763463927828,"duration":275962}},{"uid":"6a9f0a8a64fc592f","reportUrl":"../1542//#testresult/6a9f0a8a64fc592f","status":"passed","time":{"start":1763462924376,"stop":1763463147019,"duration":222643}},{"uid":"f138dac353abbfea","reportUrl":"../1541//#testresult/f138dac353abbfea","status":"passed","time":{"start":1763401238667,"stop":1763401526542,"duration":287875}},{"uid":"9619a0fe46d37059","reportUrl":"../1540//#testresult/9619a0fe46d37059","status":"broken","statusDetails":"TimeoutError: wait timed out after 1200s\nStatus(\n  model=ModelStatus(\n    name='testing',\n    type='caas',\n    controller='github-pr-d15b0-microk8s',\n    cloud='microk8s',\n    version='3.6.11',\n    region='localhost',\n    model_status=StatusInfo(current='available', since='17 Nov 2025 16:48:14Z'),\n  ),\n  machines={},\n  apps={\n    'postgresql-k8s': AppStatus(\n      charm='postgresql-k8s',\n      charm_origin='charmhub',\n      charm_name='postgresql-k8s',\n      charm_rev=495,\n      exposed=False,\n      base=FormattedBase(name='ubuntu', channel='22.04'),\n      charm_channel='14/stable',\n      scale=1,\n      app_status=StatusInfo(current='waiting', message='installing agent', since='17 Nov 2025 16:49:41Z'),\n      relations={\n        'database-peers': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='postgresql_peers', scope='global'),\n        ],\n        'restart': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='rolling_op', scope='global'),\n        ],\n        'upgrade': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='upgrade', scope='global'),\n        ],\n      },\n      units={\n        'postgresql-k8s/0': UnitStatus(\n          workload_status=StatusInfo(current='waiting', message='installing agent'),\n          juju_status=StatusInfo(current='allocating', since='17 Nov 2025 16:49:41Z'),\n        ),\n      },\n      endpoint_bindings={\n        '': 'alpha',\n        'certificates': 'alpha',\n        'database': 'alpha',\n        'database-peers': 'alpha',\n        'db': 'alpha',\n        'db-admin': 'alpha',\n        'grafana-dashboard': 'alpha',\n        'logging': 'alpha',\n        'metrics-endpoint': 'alpha',\n        'replication': 'alpha',\n        'replication-offer': 'alpha',\n        'restart': 'alpha',\n        's3-parameters': 'alpha',\n        'tracing': 'alpha',\n        'upgrade': 'alpha',\n      },\n    ),\n  },\n  storage=CombinedStorage(\n    storage={\n      'pgdata/0': StorageInfo(\n        kind='filesystem',\n        status=EntityStatus(current='pending', since='17 Nov 2025 16:49:41Z'),\n        persistent=False,\n        life='alive',\n        attachments=StorageAttachments(\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n      ),\n    },\n    filesystems={\n      '0': FilesystemInfo(\n        size=0,\n        volume='0',\n        storage='pgdata/0',\n        attachments=FilesystemAttachments(\n          containers={\n            'postgresql-k8s/0': FilesystemAttachment(mount_point='', read_only=False, life='alive'),\n          },\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n        life='alive',\n        status=EntityStatus(current='pending', since='17 Nov 2025 16:49:41Z'),\n      ),\n    },\n    volumes={\n      '0': VolumeInfo(\n        size=0,\n        persistent=False,\n        storage='pgdata/0',\n        attachments=VolumeAttachments(\n          containers={\n            'postgresql-k8s/0': VolumeAttachment(read_only=False, life='alive'),\n          },\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n        life='alive',\n        status=EntityStatus(current='pending', since='17 Nov 2025 16:49:41Z'),\n      ),\n    },\n  ),\n  controller=ControllerStatus(timestamp='17:09:40Z'),\n)","time":{"start":1763398179568,"stop":1763399381823,"duration":1202255}},{"uid":"591da2c67a6b85b4","reportUrl":"../1539//#testresult/591da2c67a6b85b4","status":"broken","statusDetails":"TimeoutError: wait timed out after 180.0s\nStatus(\n  model=ModelStatus(\n    name='testing',\n    type='caas',\n    controller='github-pr-78a6c-microk8s',\n    cloud='microk8s',\n    version='3.6.11',\n    region='localhost',\n    model_status=StatusInfo(current='available', since='15 Nov 2025 16:14:47Z'),\n  ),\n  machines={},\n  apps={\n    'discourse-k8s': AppStatus(\n      charm='local:discourse-k8s-0',\n      charm_origin='local',\n      charm_name='discourse-k8s',\n      charm_rev=0,\n      exposed=False,\n      base=FormattedBase(name='ubuntu', channel='20.04'),\n      scale=1,\n      provider_id='c937fc2b-086a-4cda-9988-06fad0f9d720',\n      address='10.152.183.20',\n      app_status=StatusInfo(current='waiting', message='Waiting for redis relation', since='15 Nov 2025 16:19:19Z'),\n      relations={\n        'database': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='postgresql_client', scope='global'),\n        ],\n        'nginx-route': [\n          AppStatusRelation(related_app='nginx-ingress-integrator', interface='nginx-route', scope='global'),\n        ],\n        'redis': [\n          AppStatusRelation(related_app='redis-k8s', interface='redis', scope='global'),\n        ],\n        'restart': [\n          AppStatusRelation(related_app='discourse-k8s', interface='rolling_op', scope='global'),\n        ],\n      },\n      units={\n        'discourse-k8s/0': UnitStatus(\n          workload_status=StatusInfo(current='waiting', message='Waiting for redis relation', since='15 Nov 2025 16:19:19Z'),\n          juju_status=StatusInfo(current='idle', since='15 Nov 2025 16:19:28Z', version='3.6.11'),\n          leader=True,\n          address='10.1.53.15',\n          provider_id='discourse-k8s-0',\n        ),\n      },\n      endpoint_bindings={\n        '': 'alpha',\n        'database': 'alpha',\n        'grafana-dashboard': 'alpha',\n        'logging': 'alpha',\n        'metrics-endpoint': 'alpha',\n        'nginx-route': 'alpha',\n        'redis': 'alpha',\n        'restart': 'alpha',\n        'saml': 'alpha',\n      },\n    ),\n    'nginx-ingress-integrator': AppStatus(\n      charm='nginx-ingress-integrator',\n      charm_origin='charmhub',\n      charm_name='nginx-ingress-integrator',\n      charm_rev=145,\n      exposed=False,\n      base=FormattedBase(name='ubuntu', channel='20.04'),\n      charm_channel='latest/stable',\n      scale=1,\n      provider_id='677f549d-02b2-4874-863b-7e8dcd130f20',\n      address='10.152.183.24',\n      app_status=StatusInfo(current='active', message='Ingress IP(s): 127.0.0.1', since='15 Nov 2025 16:19:53Z'),\n      relations={\n        'nginx-peers': [\n          AppStatusRelation(related_app='nginx-ingress-integrator', interface='nginx-instance', scope='global'),\n        ],\n        'nginx-route': [\n          AppStatusRelation(related_app='discourse-k8s', interface='nginx-route', scope='global'),\n        ],\n      },\n      units={\n        'nginx-ingress-integrator/0': UnitStatus(\n          workload_status=StatusInfo(current='active', message='Ingress IP(s): 127.0.0.1', since='15 Nov 2025 16:19:53Z'),\n          juju_status=StatusInfo(current='idle', since='15 Nov 2025 16:19:53Z', version='3.6.11'),\n          leader=True,\n          address='10.1.53.14',\n          provider_id='nginx-ingress-integrator-0',\n        ),\n      },\n      version='24.2.0',\n      endpoint_bindings={'': 'alpha', 'certificates': 'alpha', 'ingress': 'alpha', 'nginx-peers': 'alpha', 'nginx-route': 'alpha'},\n    ),\n    'postgresql-k8s': AppStatus(\n      charm='postgresql-k8s',\n      charm_origin='charmhub',\n      charm_name='postgresql-k8s',\n      charm_rev=495,\n      exposed=False,\n      base=FormattedBase(name='ubuntu', channel='22.04'),\n      charm_channel='14/stable',\n      scale=1,\n      provider_id='7e7e487d-df99-47f3-9f85-6ada877d5b39',\n      address='10.152.183.130',\n      app_status=StatusInfo(current='active', since='15 Nov 2025 16:18:12Z'),\n      relations={\n        'database': [\n          AppStatusRelation(related_app='discourse-k8s', interface='postgresql_client', scope='global'),\n        ],\n        'database-peers': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='postgresql_peers', scope='global'),\n        ],\n        'restart': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='rolling_op', scope='global'),\n        ],\n        'upgrade': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='upgrade', scope='global'),\n        ],\n      },\n      units={\n        'postgresql-k8s/0': UnitStatus(\n          workload_status=StatusInfo(current='active', message='Primary', since='15 Nov 2025 16:18:40Z'),\n          juju_status=StatusInfo(current='idle', since='15 Nov 2025 16:21:13Z', version='3.6.11'),\n          leader=True,\n          address='10.1.53.11',\n          provider_id='postgresql-k8s-0',\n        ),\n      },\n      version='14.15',\n      endpoint_bindings={\n        '': 'alpha',\n        'certificates': 'alpha',\n        'database': 'alpha',\n        'database-peers': 'alpha',\n        'db': 'alpha',\n        'db-admin': 'alpha',\n        'grafana-dashboard': 'alpha',\n        'logging': 'alpha',\n        'metrics-endpoint': 'alpha',\n        'replication': 'alpha',\n        'replication-offer': 'alpha',\n        'restart': 'alpha',\n        's3-parameters': 'alpha',\n        'tracing': 'alpha',\n        'upgrade': 'alpha',\n      },\n    ),\n    'redis-k8s': AppStatus(\n      charm='redis-k8s',\n      charm_origin='charmhub',\n      charm_name='redis-k8s',\n      charm_rev=42,\n      exposed=False,\n      base=FormattedBase(name='ubuntu', channel='22.04'),\n      charm_channel='latest/edge',\n      scale=1,\n      provider_id='56d1923c-6a25-48d1-bca8-850af7b0e905',\n      address='10.152.183.252',\n      app_status=StatusInfo(current='active', since='15 Nov 2025 16:18:52Z'),\n      relations={\n        'redis': [\n          AppStatusRelation(related_app='discourse-k8s', interface='redis', scope='global'),\n        ],\n        'redis-peers': [\n          AppStatusRelation(related_app='redis-k8s', interface='redis-peers', scope='global'),\n        ],\n      },\n      units={\n        'redis-k8s/0': UnitStatus(\n          workload_status=StatusInfo(current='active', since='15 Nov 2025 16:18:50Z'),\n          juju_status=StatusInfo(current='idle', since='15 Nov 2025 16:19:15Z', version='3.6.11'),\n          leader=True,\n          address='10.1.53.13',\n          provider_id='redis-k8s-0',\n        ),\n      },\n      version='7.2.5',\n      endpoint_bindings={'': 'alpha', 'grafana-dashboard': 'alpha', 'logging': 'alpha', 'metrics-endpoint': 'alpha', 'redis': 'alpha', 'redis-peers': 'alpha'},\n    ),\n  },\n  storage=CombinedStorage(\n    storage={\n      'database/1': StorageInfo(\n        kind='filesystem',\n        status=EntityStatus(current='attached', message='Successfully provisioned volume pvc-3cf8ed33-22ab-4a93-95f0-cb3d3d75c8e9', since='15 Nov 2025 16:18:46Z'),\n        persistent=False,\n        life='alive',\n        attachments=StorageAttachments(\n          units={\n            'redis-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n      ),\n      'pgdata/0': StorageInfo(\n        kind='filesystem',\n        status=EntityStatus(current='attached', message='Successfully provisioned volume pvc-6ccd000e-5087-439a-b8ce-241f78d7ce0d', since='15 Nov 2025 16:16:54Z'),\n        persistent=False,\n        life='alive',\n        attachments=StorageAttachments(\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n      ),\n    },\n    filesystems={\n      '0': FilesystemInfo(\n        size=1024,\n        provider_id='6ccd000e-5087-439a-b8ce-241f78d7ce0d',\n        volume='0',\n        storage='pgdata/0',\n        attachments=FilesystemAttachments(\n          containers={\n            'postgresql-k8s/0': FilesystemAttachment(mount_point='/var/lib/postgresql/data', read_only=False, life='alive'),\n          },\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n        pool='kubernetes',\n        life='alive',\n        status=EntityStatus(current='attached', message='Successfully provisioned volume pvc-6ccd000e-5087-439a-b8ce-241f78d7ce0d', since='15 Nov 2025 16:16:54Z'),\n      ),\n      '1': FilesystemInfo(\n        size=1024,\n        provider_id='3cf8ed33-22ab-4a93-95f0-cb3d3d75c8e9',\n        volume='1',\n        storage='database/1',\n        attachments=FilesystemAttachments(\n          containers={\n            'redis-k8s/0': FilesystemAttachment(mount_point='/var/lib/redis', read_only=False, life='alive'),\n          },\n          units={\n            'redis-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n        pool='kubernetes',\n        life='alive',\n        status=EntityStatus(current='attached', message='Successfully provisioned volume pvc-3cf8ed33-22ab-4a93-95f0-cb3d3d75c8e9', since='15 Nov 2025 16:18:46Z'),\n      ),\n    },\n    volumes={\n      '0': VolumeInfo(\n        size=1024,\n        persistent=True,\n        provider_id='pvc-6ccd000e-5087-439a-b8ce-241f78d7ce0d',\n        storage='pgdata/0',\n        attachments=VolumeAttachments(\n          containers={\n            'postgresql-k8s/0': VolumeAttachment(read_only=False, life='alive'),\n          },\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n        pool='kubernetes',\n        life='alive',\n        status=EntityStatus(current='attached', since='15 Nov 2025 16:16:54Z'),\n      ),\n      '1': VolumeInfo(\n        size=1024,\n        persistent=True,\n        provider_id='pvc-3cf8ed33-22ab-4a93-95f0-cb3d3d75c8e9',\n        storage='database/1',\n        attachments=VolumeAttachments(\n          containers={\n            'redis-k8s/0': VolumeAttachment(read_only=False, life='alive'),\n          },\n          units={\n            'redis-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n        pool='kubernetes',\n        life='alive',\n        status=EntityStatus(current='attached', since='15 Nov 2025 16:18:46Z'),\n      ),\n    },\n  ),\n  controller=ControllerStatus(timestamp='16:21:59Z'),\n)","time":{"start":1763223399703,"stop":1763223720657,"duration":320954}},{"uid":"b2095d8ea96b94a9","reportUrl":"../1538//#testresult/b2095d8ea96b94a9","status":"passed","time":{"start":1763102133633,"stop":1763102400238,"duration":266605}},{"uid":"572fe6dbd3236053","reportUrl":"../1537//#testresult/572fe6dbd3236053","status":"passed","time":{"start":1762522329847,"stop":1762522589166,"duration":259319}},{"uid":"c16bf19e91c0b61f","reportUrl":"../1536//#testresult/c16bf19e91c0b61f","status":"passed","time":{"start":1762515630824,"stop":1762515864748,"duration":233924}}]},"tags":["abort_on_fail"]},"source":"3d059eaca6a7fc7b.json","parameterValues":[]}