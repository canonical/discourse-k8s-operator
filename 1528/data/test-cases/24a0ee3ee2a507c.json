{"uid":"24a0ee3ee2a507c","name":"test_db_migration","fullName":"tests.integration.test_db_migration#test_db_migration","historyId":"91090b7b91ff22d006a46c7dd051bfd1","time":{"start":1761749643465,"stop":1761749950605,"duration":307140},"description":"\n    arrange: preload postgres with a testing db that is created in Discourse v3.2.0\n    act: deploy and integrate with Discourse v3.3.0 (latest)\n    assert: discourse is active/idle\n\n    Discourse must be active idle, it might create migration errors related to\n    not being able to delete some columns because of triggers. This is fixed\n    with a patch but this patch only works for Discourse v3.2.0 and we might\n    need to create a new patch for the new version of Discourse.\n    ","descriptionHtml":"<pre><code>arrange: preload postgres with a testing db that is created in Discourse v3.2.0\nact: deploy and integrate with Discourse v3.3.0 (latest)\nassert: discourse is active/idle\n\nDiscourse must be active idle, it might create migration errors related to\nnot being able to delete some columns because of triggers. This is fixed\nwith a patch but this patch only works for Discourse v3.2.0 and we might\nneed to create a new patch for the new version of Discourse.\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"metadata","time":{"start":1761749643462,"stop":1761749643464,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_file","time":{"start":1761749643464,"stop":1761749643464,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju","time":{"start":1761749643464,"stop":1761749643465,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1761749643464,"stop":1761749643464,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_resources","time":{"start":1761749643465,"stop":1761749643465,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1761749643465,"stop":1761749643465,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_base","time":{"start":1761749643465,"stop":1761749643465,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    arrange: preload postgres with a testing db that is created in Discourse v3.2.0\n    act: deploy and integrate with Discourse v3.3.0 (latest)\n    assert: discourse is active/idle\n\n    Discourse must be active idle, it might create migration errors related to\n    not being able to delete some columns because of triggers. This is fixed\n    with a patch but this patch only works for Discourse v3.2.0 and we might\n    need to create a new patch for the new version of Discourse.\n    ","status":"passed","steps":[],"attachments":[{"uid":"9c910c5cb6209421","name":"log","source":"9c910c5cb6209421.txt","type":"text/plain","size":79420}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1761749950605,"stop":1761749950605,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_file::0","time":{"start":1761749950606,"stop":1761749950606,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju::0","time":{"start":1761749950606,"stop":1761749950606,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"metadata::0","time":{"start":1761749950607,"stop":1761749950607,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"parentSuite","value":"tests.integration"},{"name":"suite","value":"test_db_migration"},{"name":"host","value":"github-runner"},{"name":"thread","value":"28925-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.test_db_migration"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"6e01785ebe0d163f","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":0,"passed":8,"unknown":0,"total":8},"items":[{"uid":"130d2918b756ede4","reportUrl":"../1525//#testresult/130d2918b756ede4","status":"passed","time":{"start":1761740649383,"stop":1761740920809,"duration":271426}},{"uid":"ca1f8d1c10de3226","reportUrl":"../1527//#testresult/ca1f8d1c10de3226","status":"passed","time":{"start":1761740555420,"stop":1761740819596,"duration":264176}},{"uid":"9e7a9c6ac911e83c","reportUrl":"../1526//#testresult/9e7a9c6ac911e83c","status":"passed","time":{"start":1761740519218,"stop":1761740784900,"duration":265682}},{"uid":"65722539136e083c","reportUrl":"../1524//#testresult/65722539136e083c","status":"passed","time":{"start":1761739885174,"stop":1761740117082,"duration":231908}},{"uid":"e65c0585f5eed33e","reportUrl":"../1521//#testresult/e65c0585f5eed33e","status":"passed","time":{"start":1761673492605,"stop":1761673732610,"duration":240005}},{"uid":"296f64ecbe42a803","reportUrl":"../1520//#testresult/296f64ecbe42a803","status":"passed","time":{"start":1761671442144,"stop":1761671821115,"duration":378971}},{"uid":"2d081dcdf5a2ec07","reportUrl":"../1518//#testresult/2d081dcdf5a2ec07","status":"passed","time":{"start":1761651638599,"stop":1761651891904,"duration":253305}}]},"tags":["abort_on_fail"]},"source":"24a0ee3ee2a507c.json","parameterValues":[]}