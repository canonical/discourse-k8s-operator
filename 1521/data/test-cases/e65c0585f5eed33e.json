{"uid":"e65c0585f5eed33e","name":"test_db_migration","fullName":"tests.integration.test_db_migration#test_db_migration","historyId":"91090b7b91ff22d006a46c7dd051bfd1","time":{"start":1761673492605,"stop":1761673732610,"duration":240005},"description":"\n    arrange: preload postgres with a testing db that is created in Discourse v3.2.0\n    act: deploy and integrate with Discourse v3.3.0 (latest)\n    assert: discourse is active/idle\n\n    Discourse must be active idle, it might create migration errors related to\n    not being able to delete some columns because of triggers. This is fixed\n    with a patch but this patch only works for Discourse v3.2.0 and we might\n    need to create a new patch for the new version of Discourse.\n    ","descriptionHtml":"<pre><code>arrange: preload postgres with a testing db that is created in Discourse v3.2.0\nact: deploy and integrate with Discourse v3.3.0 (latest)\nassert: discourse is active/idle\n\nDiscourse must be active idle, it might create migration errors related to\nnot being able to delete some columns because of triggers. This is fixed\nwith a patch but this patch only works for Discourse v3.2.0 and we might\nneed to create a new patch for the new version of Discourse.\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"metadata","time":{"start":1761673492602,"stop":1761673492605,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_file","time":{"start":1761673492605,"stop":1761673492605,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1761673492605,"stop":1761673492605,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_base","time":{"start":1761673492605,"stop":1761673492605,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1761673492605,"stop":1761673492605,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_resources","time":{"start":1761673492605,"stop":1761673492605,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju","time":{"start":1761673492605,"stop":1761673492605,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    arrange: preload postgres with a testing db that is created in Discourse v3.2.0\n    act: deploy and integrate with Discourse v3.3.0 (latest)\n    assert: discourse is active/idle\n\n    Discourse must be active idle, it might create migration errors related to\n    not being able to delete some columns because of triggers. This is fixed\n    with a patch but this patch only works for Discourse v3.2.0 and we might\n    need to create a new patch for the new version of Discourse.\n    ","status":"passed","steps":[],"attachments":[{"uid":"ffaddec9b18a2bfa","name":"log","source":"ffaddec9b18a2bfa.txt","type":"text/plain","size":80333}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1761673732611,"stop":1761673732611,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju::0","time":{"start":1761673732611,"stop":1761673732611,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_file::0","time":{"start":1761673732612,"stop":1761673732612,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"metadata::0","time":{"start":1761673732613,"stop":1761673732613,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"parentSuite","value":"tests.integration"},{"name":"suite","value":"test_db_migration"},{"name":"host","value":"github-runner"},{"name":"thread","value":"29679-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.test_db_migration"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"e42b947cc46b2893","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":0,"passed":3,"unknown":0,"total":3},"items":[{"uid":"296f64ecbe42a803","reportUrl":"../1520//#testresult/296f64ecbe42a803","status":"passed","time":{"start":1761671442144,"stop":1761671821115,"duration":378971}},{"uid":"2d081dcdf5a2ec07","reportUrl":"../1518//#testresult/2d081dcdf5a2ec07","status":"passed","time":{"start":1761651638599,"stop":1761651891904,"duration":253305}}]},"tags":["abort_on_fail"]},"source":"e65c0585f5eed33e.json","parameterValues":[]}