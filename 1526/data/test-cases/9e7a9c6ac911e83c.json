{"uid":"9e7a9c6ac911e83c","name":"test_db_migration","fullName":"tests.integration.test_db_migration#test_db_migration","historyId":"91090b7b91ff22d006a46c7dd051bfd1","time":{"start":1761740519218,"stop":1761740784900,"duration":265682},"description":"\n    arrange: preload postgres with a testing db that is created in Discourse v3.2.0\n    act: deploy and integrate with Discourse v3.3.0 (latest)\n    assert: discourse is active/idle\n\n    Discourse must be active idle, it might create migration errors related to\n    not being able to delete some columns because of triggers. This is fixed\n    with a patch but this patch only works for Discourse v3.2.0 and we might\n    need to create a new patch for the new version of Discourse.\n    ","descriptionHtml":"<pre><code>arrange: preload postgres with a testing db that is created in Discourse v3.2.0\nact: deploy and integrate with Discourse v3.3.0 (latest)\nassert: discourse is active/idle\n\nDiscourse must be active idle, it might create migration errors related to\nnot being able to delete some columns because of triggers. This is fixed\nwith a patch but this patch only works for Discourse v3.2.0 and we might\nneed to create a new patch for the new version of Discourse.\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"metadata","time":{"start":1761740519215,"stop":1761740519217,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_file","time":{"start":1761740519217,"stop":1761740519217,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1761740519217,"stop":1761740519217,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1761740519217,"stop":1761740519217,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_base","time":{"start":1761740519217,"stop":1761740519217,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju","time":{"start":1761740519217,"stop":1761740519217,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_resources","time":{"start":1761740519217,"stop":1761740519217,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    arrange: preload postgres with a testing db that is created in Discourse v3.2.0\n    act: deploy and integrate with Discourse v3.3.0 (latest)\n    assert: discourse is active/idle\n\n    Discourse must be active idle, it might create migration errors related to\n    not being able to delete some columns because of triggers. This is fixed\n    with a patch but this patch only works for Discourse v3.2.0 and we might\n    need to create a new patch for the new version of Discourse.\n    ","status":"passed","steps":[],"attachments":[{"uid":"b54f8571eae0da8d","name":"log","source":"b54f8571eae0da8d.txt","type":"text/plain","size":77500}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1761740784900,"stop":1761740784900,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"metadata::0","time":{"start":1761740784902,"stop":1761740784902,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_file::0","time":{"start":1761740784902,"stop":1761740784902,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju::0","time":{"start":1761740784902,"stop":1761740784902,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"parentSuite","value":"tests.integration"},{"name":"suite","value":"test_db_migration"},{"name":"host","value":"github-runner"},{"name":"thread","value":"29339-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.test_db_migration"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"d130be8edc315da5","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":0,"passed":5,"unknown":0,"total":5},"items":[{"uid":"65722539136e083c","reportUrl":"../1524//#testresult/65722539136e083c","status":"passed","time":{"start":1761739885174,"stop":1761740117082,"duration":231908}},{"uid":"e65c0585f5eed33e","reportUrl":"../1521//#testresult/e65c0585f5eed33e","status":"passed","time":{"start":1761673492605,"stop":1761673732610,"duration":240005}},{"uid":"296f64ecbe42a803","reportUrl":"../1520//#testresult/296f64ecbe42a803","status":"passed","time":{"start":1761671442144,"stop":1761671821115,"duration":378971}},{"uid":"2d081dcdf5a2ec07","reportUrl":"../1518//#testresult/2d081dcdf5a2ec07","status":"passed","time":{"start":1761651638599,"stop":1761651891904,"duration":253305}}]},"tags":["abort_on_fail"]},"source":"9e7a9c6ac911e83c.json","parameterValues":[]}